<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Tennis Match Prediction AI</title>
    <link rel="stylesheet" href="{% static 'prediction/prediction.css' %}">
</head>
<body>
    <div class="top-button">
        <a href="{% url 'index' %}">
            <button>Go to Info</button>
        </a>
    </div>

    <div class="center-content">
        <div class="prediction-form">
            <form method="POST" action="{% url 'prediction_view' %}">
                {% csrf_token %}
                <div class="player-inputs">
                    <div>
                        <label>Player 1:</label>
                        <input type="text" name="player1" id="player1" required>
                        <div id="player1-suggestions" style="color: blue;"></div>
                    </div>
                    <div>
                        <label>Player 2:</label>
                        <input type="text" name="player2" id="player2" required>
                        <div id="player2-suggestions" style="color: blue;"></div>
                    </div>
                </div>

                <div class="form-field">
                    <label>Date:</label>
                    <input type="date" name="date" required>
                </div>

                <div class="form-field">
                    <label>Tournament:</label>
                    <select name="series">
                        <option value="International">International</option>
                        <option value="International Gold">International Gold</option>
                        <option value="ATP250">ATP250</option>
                        <option value="ATP500">ATP500</option>
                        <option value="Masters">Masters</option>
                        <option value="Masters Cup">Masters Cup</option>
                        <option value="Masters 1000">Masters 1000</option>
                        <option value="Grand Slam">Grand Slam</option>
                    </select>
                </div>

                <div class="form-field">
                    <label>Court:</label>
                    <select name="court">
                        <option value="Indoor">Indoor</option>
                        <option value="Outdoor">Outdoor</option>
                    </select>
                </div>

                <div class="form-field">
                    <label>Surface:</label>
                    <select name="surface">
                        <option value="Hard">Hard</option>
                        <option value="Clay">Clay</option>
                        <option value="Grass">Grass</option>
                        <option value="Carpet">Carpet</option>
                    </select>
                </div>

                <div class="form-field">
                    <label>Round:</label>
                    <input type="number" name="round" min="1" required>
                </div>

                <div class="form-submit">
                    <button type="submit">Predict</button>
                </div>
            </form>
                <div class ="prediction">
            <p>Predicted winner:</p>
            <p> {{ result }}</p>
        </div>
        </div>
    </div>


<script>
function setupAutocomplete(inputId, suggestionId) {
    document.getElementById(inputId).addEventListener('input', function() {
        let query = this.value;
        if(query.length == 0) {
            document.getElementById(suggestionId).innerHTML = '';
            return;
        }
        fetch(`/autocomplete_player/?q=${query}`)
            .then(response => response.json())
            .then(data => {
                let html = data.suggestions.map(name => `<div>${name}</div>`).join('');
                document.getElementById(suggestionId).innerHTML = html;
            });
    });
}

setupAutocomplete('player1', 'player1-suggestions');
setupAutocomplete('player2', 'player2-suggestions');
</script>
</body>
</html>

